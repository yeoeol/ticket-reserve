<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>버스킹 공연 등록 | Busking Station</title>
    <link th:href="@{/buskings/css/busking.css}" rel="stylesheet">
</head>
<body>

<div th:replace="~{layout/header::header}"></div>
<main class="form-section">
    <div class="busking-title-header">
        <h1>버스킹 공연 등록</h1>
        <p class="event-meta">새로운 버스킹 공연 정보를 입력해주세요.</p>
    </div>

    <form action="/buskings" method="POST" enctype="multipart/form-data">

        <div class="form-group">
            <label for="title">공연 제목</label>
            <input type="text" id="title" name="title" placeholder="예: 홍대 버스킹 페스티벌" required>
        </div>

        <div class="form-group">
            <label for="location">공연 장소</label>
            <input type="text" id="location" name="location" placeholder="예: 서울특별시 마포구 어울마당로" required>
        </div>

        <div class="form-group">
            <label for="totalInventoryCount">좌석 수</label>
            <input type="text" id="totalInventoryCount" name="totalInventoryCount" placeholder="예: 10" required>
        </div>

        <div style="display: flex; gap: 20px;">
            <div class="form-group" style="flex: 1;">
                <label for="startTime">공연 시작 시간</label>
                <input type="datetime-local" id="startTime" name="startTime" required>
            </div>
            <div class="form-group" style="flex: 1;">
                <label for="endTime">공연 종료 시간</label>
                <input type="datetime-local" id="endTime" name="endTime" required>
            </div>
        </div>

        <div class="form-group">
            <label>공연 포스터 (썸네일)</label>
            <div class="image-upload-box" onclick="document.getElementById('file').click()">
                <p>클릭하여 이미지를 업로드하세요 (JPG, PNG / 최대 5MB)</p>
                <input type="file" id="file" name="file" accept="image/*" style="display: none;" onchange="previewImage(this)">
                <div id="image-preview"></div>
            </div>
        </div>

        <div class="form-group">
            <label for="description">공연 상세 설명</label>
            <textarea id="description" name="description" placeholder="공연에 대한 상세한 내용을 적어주세요."></textarea>
        </div>

        <div class="btn-container">
            <button type="button" class="btn-cancel" onclick="history.back()">취소</button>
            <button type="submit" class="reserve-button" style="width: auto; margin-top: 0;">공연 등록하기</button>
        </div>
    </form>
</main>

<script>
    function previewImage(input) {
        const preview = document.getElementById('image-preview');
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; height: 200px; margin-top: 10px; border-radius: 8px;">`;
            };
            reader.readAsDataURL(input.files[0]);
        }
    }
</script>

</body>
</html>